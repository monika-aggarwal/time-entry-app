!function(e){var t={};function r(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/",r(r.s=18)}([function(e,t){e.exports=require("@emotion/core")},function(e,t){e.exports=require("react")},function(e,t,r){var s=r(11);const a=r(19).realpathSync(process.cwd()),n=e=>s.resolve(a,e);var o={srcClient:n("./src/client"),srcShared:n("./src/shared"),srcServer:n("./src/server"),buildServer:n("./dist/server"),src:n("./src"),dist:n("./dist"),stats:n("dist/loadable-stats.json"),publicPath:"/",prodPublicPath:"/static/"};e.exports=o},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("firebase/app")},function(e,t){e.exports=require("react-datetime")},function(e,t){e.exports=require("firebase-admin")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("@loadable/server")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("cookie")},function(e,t,r){e.exports=r(24)},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("firebase/auth")},function(e,t){e.exports=require("firebase/database")},function(e,t){e.exports=require("dotenv")},function(e,t,r){"use strict";r.r(t);r(11);var s=r(5),a=r.n(s),n=r(12),o=r.n(n),c=r(6),i=r.n(c),l=r(13),u=r.n(l),p=r(1),d=r.n(p),j=r(7),b=r(14),O=r(15),x=r(2),h=r.n(x),m=(r(20),r(4)),g=({props:e=(()=>({})),actions:t=(e=>({dispatch:e})),options:r={}}={})=>Object(m.connect)(e,t,null,r),f=r(8),T=r.n(f);r(21),r(22);T.a.initializeApp({apiKey:"AIzaSyDVJLLBWIhjVU5ogm2GtyALnADZdJ_z_lU",authDomain:"tasklist-2be89.firebaseapp.com",databaseURL:"https://tasklist-2be89.firebaseio.com",projectId:"tasklist-2be89",storageBucket:"tasklist-2be89.appspot.com",messagingSenderId:"493798251149"});var y=T.a;var S=r(0);const v={REGISTER:"register",LOGIN:"login"};var k=g({props:({auth:{errorMessage:e}})=>({errorMessage:e}),actions:{login:(e,t)=>(r,s,{setCookie:a})=>y.auth().signInWithEmailAndPassword(e,t).then(e=>(r({type:"LOGIN",payload:{loggedIn:!0}}),y.auth().currentUser.getIdToken().then(e=>{a("token",e)}).catch(e=>{}))).catch(e=>{let t;switch(e.code){case"auth/weak-password":t="The password is too weak.";break;default:t=e.message}r({type:"LOGIN_FAILED",payload:{errorMessage:t}})}),register:(e,t)=>r=>y.auth().createUserWithEmailAndPassword(e,t).then(()=>(r({type:"REGISTER_SUCCESS",payload:{errorMessage:""}}),"success")).catch(e=>{let t;switch(e.code){case"auth/weak-password":t="The password is too weak.";break;default:t=e.message}r({type:"REGISTER_FAILED",payload:{errorMessage:t}})})}})(({login:e,register:t,errorMessage:r})=>{const[{email:s="",password:a=""},n]=Object(p.useState)({}),[o,c]=Object(p.useState)(v.REGISTER);function i(e,t){n(r=>({...r,[e]:t}))}function l(){let e;e=o===v.REGISTER?v.LOGIN:v.REGISTER,c(e)}return Object(S.jsx)("div",null,Object(S.jsx)("div",null,o===v.LOGIN&&Object(S.jsx)("div",{onClick:()=>l()},"go To register")),Object(S.jsx)("input",{type:"email",onChange:({target:{value:e}})=>i("email",e),placeholder:"email",value:s}),Object(S.jsx)("input",{type:"password",onChange:({target:{value:e}})=>i("password",e),placeholder:"password",value:a}),Object(S.jsx)("button",{onClick:()=>void(o===v.LOGIN?e(s,a):t(s,a).then(e=>{"success"===e&&l()}))},o),o===v.REGISTER&&Object(S.jsx)("button",{onClick:()=>l()},"go to Login"),r&&Object(S.jsx)("span",null,r))});var I=({taskList:e})=>Object(S.jsx)(p.Fragment,null,Object(S.jsx)("table",null,Object(S.jsx)("tbody",null,Object(S.jsx)("tr",null,Object(S.jsx)("th",null," Task Name"),Object(S.jsx)("th",null," Project Name"),Object(S.jsx)("th",null," Start Time"),Object(S.jsx)("th",null," End Time")),e.map(({name:e,project:t,startTime:r,endTime:s})=>Object(S.jsx)("tr",{key:r},Object(S.jsx)("td",null,e),Object(S.jsx)("td",null,t),Object(S.jsx)("td",null,new Date(r).toLocaleString()),Object(S.jsx)("td",null,new Date(s).toLocaleString()))))));var E=g({props:()=>({}),actions:{signOut:()=>(e,t,{clearCookie:r})=>(console.log("helper",r),y.auth().signOut().then(()=>{r("token"),e({type:"LOGIN",payload:{loggedIn:!1}})}).catch(()=>{e({type:"SIGNOUT_FAILED",payload:{errorMessage:"Failed to Signout"}})})),createEntry:({name:e,project:t,startTime:r,endTime:s})=>a=>{var n=y.auth().currentUser.uid;return y.database().ref("entries/"+n).push().set({taskName:e,project:t,startTime:r,endTime:s}).then(e=>{console.log("sucess",e)}).catch(e=>{console.log("failed to create an entry")})}}})(({signOut:e,createEntry:t,projectList:r})=>{const[{name:s="",project:a="",started:n=!1},o]=Object(p.useState)({}),[{startTime:c,count:i=0},l]=Object(p.useState)({}),[u,d]=Object(p.useState)([]),j=Object(p.useRef)(null),b=(e,t)=>{o(r=>({...r,[e]:t}))};return Object(S.jsx)("div",null,Object(S.jsx)("div",{onClick:()=>{e()}},"sign out"),Object(S.jsx)("input",{type:"text",onChange:({target:{value:e}})=>b("name",e),placeholder:"add item name",value:s}),Object(S.jsx)("select",{value:a,onChange:({target:{value:e}})=>b("project",e)},Object(S.jsx)("option",{value:""},"Select"),r.map(({key:e,label:t})=>Object(S.jsx)("option",{value:e,key:e},t))),Object(S.jsx)("div",null,"Timer: ",i),Object(S.jsx)("button",{onClick:n?()=>{const e=(new Date).getTime();b("started",!1),clearInterval(j.current),(e=>{d(t=>[...t,e]),t(e)})({name:s,project:a,startTime:c,endTime:e})}:()=>{b("started",!0),l({startTime:(new Date).getTime(),count:0}),j.current=setInterval(()=>{l(({startTime:e,count:t=0})=>({startTime:e,count:t+1}))},1e3)}},n?"stop":"start"),u&&!!u.length&&Object(S.jsx)(I,{taskList:u}))}),_=r(9),C=r.n(_);const w=()=>{let e=new Date;return e.setDate(e.getDate()-7),e.setHours(0,0,0),e};var L=({submit:e})=>{const[{startDate:t,endDate:r},s]=Object(p.useState)({startDate:w(),endDate:new Date});return Object(S.jsx)("div",{className:"report-filter"},Object(S.jsx)("div",{className:"row"},Object(S.jsx)(C.a,{inputProps:{placeholder:"Start date"},onChange:e=>(e=>{s(t=>({...t,startDate:e}))})(e.valueOf())}),Object(S.jsx)(C.a,{inputProps:{placeholder:"End date"},onChange:e=>(e=>{e>t&&s(t=>({...t,endDate:e}))})(e.valueOf())}),Object(S.jsx)("button",{onClick:()=>e(t,r)},"Fetch Tasks")))};var R=g({actions:{fetchList:()=>e=>{var t=y.auth().currentUser.uid;const r=y.database().ref("entries/"+t);return new Promise((t,s)=>{r.once("value",r=>{let s={};r.forEach(e=>{var t=e.key,r=e.val();r.startTime=new Date(r.startTime),r.endTime=new Date(r.endTime),s[t]=r}),console.log("@@@@@@@@@",s),e({type:"TASKLIST",payload:s}),t(s)})})}}})(({fetchList:e})=>{const[t,r]=Object(p.useState)([]);return Object(S.jsx)("div",null,Object(S.jsx)(L,{submit:(t,s)=>((t,s)=>{e().then(e=>{let a=Object.values(e).map(e=>({name:e.taskName,project:e.project,startTime:e.startTime&&new Date(e.startTime).getTime(),endTime:e.endTime&&new Date(e.endTime).getTime()})).filter(e=>e.startTime&&e.startTime>t&&e.endTime&&e.endTime<s);console.log("!!!!!!!!",a),r(a)})})(t,s)}),t&&!!t.length&&Object(S.jsx)(I,{taskList:t}))});var D=({onClick:e})=>Object(S.jsx)("header",null,Object(S.jsx)("div",null,"Time Entry App"),Object(S.jsx)("div",null,Object(S.jsx)("div",{onClick:()=>e(!1)},"Add Task"),Object(S.jsx)("div",{onClick:()=>e(!0)},"View Task")));const q=[{key:"project1",label:"project 1"},{key:"project2",label:"project 2"},{key:"project3",label:"project 3"}];var A=g({props:({auth:{loggedIn:e}})=>({loggedIn:e})})(({loggedIn:e})=>{const[t,r]=Object(p.useState)(!1);return e?Object(S.jsx)(d.a.Fragment,null,Object(S.jsx)(D,{onClick:e=>r(e)}),!t&&Object(S.jsx)(E,{projectList:q}),t&&Object(S.jsx)(R,null)):Object(S.jsx)(k,null)});var N=({children:e,header:t})=>Object(S.jsx)("html",{lang:"en"},Object(S.jsx)("head",null,t,Object(S.jsx)("link",{rel:"stylesheet",href:"https://rawgit.com/arqex/react-datetime/master/css/react-datetime.css"})),Object(S.jsx)("body",null,Object(S.jsx)("div",{id:"app",className:"app",dangerouslySetInnerHTML:{__html:e}}),Object(S.jsx)("script",{dangerouslySetInnerHTML:{__html:"window.__INITIAL_STATE__ = __STATE__"}}),"__SCRIPTS__")),P=r(10);var G=r(3),M=r(16),U=r.n(M);var F=Object(G.combineReducers)({auth:(e={loggedIn:!1},{type:t,payload:r})=>{switch(t){case"LOGIN":case"TOKEN_RETRIVED_SUCCESS":case"LOGIN_FAILED":case"REGISTER_FAILED":case"REGISTER_SUCCESS":return{...e,...r}}return e},data:(e={},{type:t,payload:r})=>{switch(t){case"TASKLIST":return{...e,...r}}return e},cookies:(e={},{type:t,payload:r})=>{switch(t){case"SET_COOKIES":case"SET_COOKIE":return{...e,...r};case"CLEAR_COOKIE":const t={...e};return delete t[r.key],t}return e}});var K=r(17),z=r.n(K);function J(e){const t={path:"/",domain:"localhost"};return e&&(t.expires=new Date(Date.now()+864e5*e)),t}function V(e){if("string"==typeof e){let t=!1;try{e=JSON.parse(e.replace(/j:/,"")),t=!0}catch(e){}if(!t){const t=z.a.parse(e);e=Object.keys(t).length?t:e}}return e}r(23).config();const H=a()();console.log("initailaizing firebase admin"),P.initializeApp({credential:P.credential.applicationDefault(),databaseURL:"https://tasklist-2be89.firebaseio.com"}),H.use(h.a.prodPublicPath,a.a.static(h.a.dist)),H.use(o()()),H.use((e,t,r)=>{u()()(e,t,()=>{const s={...e.cookies};Object.keys(s).forEach(e=>{s[e]=V(s[e])}),t.locals.cookies=s,r()})}),H.use(i.a.json()),H.use(i.a.urlencoded({extended:!0})),H.use((e,t,r)=>{const s={};t.locals.helpers=s,t.locals.store=function(e={},t={}){let r=Object(G.applyMiddleware)(U.a.withExtraArgument(t));return Object(G.createStore)(F,e,r)}({},s),r()}),H.use((e,t,r)=>{const{locals:{store:s,helpers:a,cookies:n}}=t,{setCookie:o,clearCookie:c}=function(e,t){return{setCookie:(e,r,s={})=>{t.cookie(e,r,{...J(),...s}),t.locals.cookies[e]=V(r)},clearCookie:e=>{t.clearCookie(e),t.locals.cookies[e]=null}}}(0,t);a.setCookie=(e,r,a)=>{t.headersSent||(o(e,r,a),s.dispatch({type:"SET_COOKIE",payload:{key:e,val:V(r),opts:a}}))},a.clearCookie=e=>{t.headersSent||(c(e),s.dispatch({type:"CLEAR_COOKIE",payload:{key:e}}))},s.dispatch({type:"SET_COOKIES",payload:n}),r()}),H.use(async(e,t,r)=>{const s=t.locals.store;await s.dispatch((()=>(e,t)=>{const{cookies:{token:r}}=t();if(!r)return Promise.resolve({});e({type:"LOGIN",payload:{loggedIn:!0}})})());const a=new O.ChunkExtractor({statsFile:h.a.stats,entrypoints:["bundle"]}),n=a.collectChunks(Object(S.jsx)(m.Provider,{store:t.locals.store},Object(S.jsx)(b.StaticRouter,{location:e.url,context:{}},Object(S.jsx)(A,null)))),o=Object(j.renderToString)(n),c=a.getScriptTags(),i=t.locals.store.getState();return t.send("<!doctype html>"+Object(j.renderToString)(Object(S.jsx)(N,null,o)).replace("__STATE__",JSON.stringify(i).replace(/</g,"\\u003c")).replace("__SCRIPTS__",c))});let W=process.env.PORT||8500;H.listen(W,()=>{console.log(`Server started on PORT ${W}`)});t.default=H}]);